# Chat System User Flow Guide

## ğŸ¯ Complete User Journey

### 1ï¸âƒ£ Starting a Direct Chat

```
User Dashboard
    â†“
Click "Community" in Sidebar
    â†“
Browse Users List
    â†“
Find User â†’ Click "Chat" Button
    â†“
Redirected to Chat Interface
    â†“
Type Message â†’ Press Enter
    â†“
Message Sent in Real-Time âœ…
```

**Visual Flow:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Dashboard     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Community     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Teacher 1 â”‚  â”‚
â”‚  â”‚ [Chat]    â”‚â†â”€â”¼â”€â”€â”€ Click here
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Chat Interface â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Messages  â”‚  â”‚
â”‚  â”‚ [Type...] â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2ï¸âƒ£ Creating a Group Chat

```
User Dashboard
    â†“
Click "Messages" in Sidebar
    â†“
Click "Group" Icon (top right)
    â†“
Select Multiple Users (checkboxes)
    â†“
Enter Group Name & Description
    â†“
Click "Create"
    â†“
Group Created â†’ Start Chatting âœ…
```

**Visual Flow:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Messages      â”‚
â”‚   [+] [ğŸ‘¥]     â”‚â†â”€â”€â”€ Click group icon
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  New Group      â”‚
â”‚  â˜‘ User 1       â”‚
â”‚  â˜‘ User 2       â”‚
â”‚  â˜ User 3       â”‚
â”‚  Name: [____]   â”‚
â”‚  [Create]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Group Chat     â”‚
â”‚  "Study Group"  â”‚
â”‚  3 participants â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ï¸âƒ£ Making an Audio/Video Call

```
Open Conversation
    â†“
Click Phone Icon (audio) or Video Icon
    â†“
Call Initiated â†’ "Calling..."
    â†“
Other User Receives Notification
    â†“
Other User Accepts
    â†“
Call Connected â†’ Audio/Video Active âœ…
    â†“
Use Controls: Mute, Video Toggle, End
```

**Visual Flow:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Chat with John â”‚
â”‚  [ğŸ“] [ğŸ“¹] [â‹®] â”‚â†â”€â”€â”€ Click to call
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Calling...     â”‚
â”‚  â±ï¸ 00:00      â”‚
â”‚  [ğŸ”‡] [ğŸ“¹] [ğŸ“]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Connected      â”‚
â”‚  â±ï¸ 02:34      â”‚
â”‚  [ğŸ”‡] [ğŸ“¹] [ğŸ“]â”‚â†â”€â”€â”€ Active call
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4ï¸âƒ£ Sending Files/Images

```
Open Conversation
    â†“
Click Paperclip Icon
    â†“
Select File from Computer
    â†“
File Uploads Automatically
    â†“
File Appears in Chat
    â†“
Recipient Can Download/View âœ…
```

**Visual Flow:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Chat           â”‚
â”‚  [ğŸ“] [Type...] â”‚â†â”€â”€â”€ Click paperclip
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Select File    â”‚
â”‚  ğŸ“„ document.pdfâ”‚
â”‚  ğŸ–¼ï¸ image.jpg   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Uploading...   â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80% â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“„ document.pdfâ”‚
â”‚  [Download]     â”‚â†â”€â”€â”€ File sent
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ UI Layout Overview

### Chat Page Layout
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Sidebar  â”‚  Conversations  â”‚  Chat      â”‚
â”‚           â”‚                 â”‚            â”‚
â”‚ Messages  â”‚  ğŸ” Search      â”‚  John Doe  â”‚
â”‚ Community â”‚                 â”‚  [ğŸ“][ğŸ“¹] â”‚
â”‚ Settings  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â”‚
â”‚           â”‚  â”‚ John Doe  â”‚  â”‚  Messages  â”‚
â”‚           â”‚  â”‚ Hey there â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ Hi!  â”‚  â”‚
â”‚           â”‚                 â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â”‚
â”‚           â”‚  â”‚ Study Grp â”‚  â”‚  [Type...] â”‚
â”‚           â”‚  â”‚ 3 members â”‚  â”‚  [ğŸ“][ğŸ˜Š] â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile Layout
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Messages      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  John Doe        â”‚
â”‚  [ğŸ“] [ğŸ“¹] [â‹®]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Hi there! â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Hello!    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ğŸ“] [Type...] â–¶â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Real-Time Features Flow

### Message Delivery
```
User A Types Message
    â†“
Clicks Send
    â†“
API: POST /api/conversations/:id/messages
    â†“
Server Saves to MongoDB
    â†“
Socket.io Broadcasts to Room
    â†“
User B Receives via Socket
    â†“
Message Appears Instantly âœ…
```

### Typing Indicator
```
User A Starts Typing
    â†“
Socket.io: emit('typing', { isTyping: true })
    â†“
Server Broadcasts to Room
    â†“
User B Sees "User A is typing..."
    â†“
User A Stops (3s timeout)
    â†“
Indicator Disappears âœ…
```

### Read Receipts
```
User B Opens Conversation
    â†“
API: POST /api/conversations/:id/read
    â†“
Server Updates lastReadAt
    â†“
User A Sees Checkmarks âœ…
```

## ğŸ¯ Role-Based Access Flow

### Teacher Flow
```
Teacher Logs In
    â†“
Goes to Community
    â†“
Sees ALL Users (Teachers + Students)
    â†“
Can Click "Chat" on Anyone
    â†“
Can Create Groups with Anyone âœ…
```

### Student Flow
```
Student Logs In
    â†“
Goes to Community
    â†“
Sees ONLY Students (Filtered)
    â†“
Can Click "Chat" on Students Only
    â†“
Can Create Groups with Students Only âœ…
```

**Permission Check:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Action    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check Role     â”‚
â”‚  Teacher? âœ…    â”‚
â”‚  Student? âœ…    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Filter Users   â”‚
â”‚  Apply Rules    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Show Allowed   â”‚
â”‚  Users Only     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”” Notification Flow

### Incoming Message
```
New Message Arrives
    â†“
Socket.io Event: 'new_message'
    â†“
If Conversation Open:
    â†’ Add to message list
    â†’ Mark as read
    â†’ Scroll to bottom
    â†“
If Conversation Closed:
    â†’ Show unread badge
    â†’ Update conversation list
    â†’ Move to top
```

### Incoming Call
```
Call Initiated
    â†“
Socket.io Event: 'incoming_call'
    â†“
Show Call Dialog
    â†“
Play Ring Sound
    â†“
User Can:
    â†’ Accept (join call)
    â†’ Decline (end call)
```

## ğŸ“Š Data Flow Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend   â”‚
â”‚   (React)    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ HTTP/REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Express    â”‚
â”‚   Server     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ MongoDB Driver
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MongoDB    â”‚
â”‚   Database   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Real-Time:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend   â”‚
â”‚ (Socket.io)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ WebSocket
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Socket.io  â”‚
â”‚   Server     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¬ Complete User Story

### Scenario: Teacher Creates Study Group

```
1. Teacher Sarah logs in
   â””â”€â†’ Sees dashboard

2. Clicks "Messages" in sidebar
   â””â”€â†’ Opens chat page

3. Clicks group icon
   â””â”€â†’ Opens "New Group" dialog

4. Searches for students
   â””â”€â†’ Types "John" in search

5. Selects 3 students
   â””â”€â†’ Checks boxes next to names

6. Names the group "Math Study Group"
   â””â”€â†’ Enters in name field

7. Adds description "Weekly math discussions"
   â””â”€â†’ Enters in description field

8. Clicks "Create"
   â””â”€â†’ Group created successfully

9. Sends first message "Welcome everyone!"
   â””â”€â†’ Message delivered to all 3 students

10. All students receive notification
    â””â”€â†’ See new group in their Messages

11. Students join and start chatting
    â””â”€â†’ Real-time conversation begins

12. Sarah starts a video call
    â””â”€â†’ All students receive call notification

13. Students join the call
    â””â”€â†’ Group video study session active âœ…
```

## ğŸ‰ Success Indicators

âœ… Messages appear instantly
âœ… Typing indicators work
âœ… Files upload and display
âœ… Calls connect successfully
âœ… Unread badges update
âœ… Search finds conversations
âœ… Mobile layout adapts
âœ… Permissions enforced
âœ… Groups function properly
âœ… Real-time updates work

---

**The complete chat system is ready to use!** ğŸš€
